import{T as g}from"./tvshow.api.services-VLTQgXXN.js";import{r as h,G as u,j as e,u as x}from"./index-DpbeLBAt.js";/* empty css               */import v from"./NotFound-qiBTvgLT.js";import{u as f,a as j}from"./useFetchTVShows-CEy75d4D.js";const p=r=>{const{imageSources:a,hasOverlay:l=!1}=r,o=a.length>0;return h.useEffect(()=>{let s;return o&&(s=new u(".glide",{type:"carousel",autoplay:1e4,hoverpause:!1,gap:0,animationDuration:1e3}).mount(),s.on("swipe.end",()=>{s.go("0")})),()=>{s&&s.destroy()}},[a]),o?e.jsx("div",{className:"glide",children:e.jsx("div",{className:`glide__track h-60 md:h-96 ${l&&"overlay"}`,"data-glide-el":"track",children:e.jsx("ul",{className:"glide__slides",children:a.map((s,n)=>e.jsxs("li",{className:"glide__slide relative",children:[e.jsx("img",{src:s.source,alt:`poster image ${s.title}`,"aria-label":`poster image ${s.title}`}),e.jsx("h1",{className:"block text-right md:text-4xl text-lg text-white title--centered",children:s.title})]},`image_item_${n}`))})})}):e.jsx("div",{className:"h-96 skeleton w-full flex justify-center items-center opacity-60"})},w=r=>{const{title:a,tvPrograms:l,tvProgramType:o,isLoading:s=!1}=r,n=x(),c={movie:"movies","tv-show":"tv-shows"},m=e.jsx("div",{className:"skeleton w-full h-80","data-testid":"skeleton","data-cy":"skeleton"}),t=l.map(({id:i,...d})=>e.jsx(g,{info:d,onClick:()=>n.push(`/${c[o]}/${i}`)},i));return e.jsxs("div",{className:"my-1","data-element":"tv-program-rail","data-cy":"tv-program-rail",children:[e.jsx("h2",{className:"divider divider-start text-lg",children:a}),l.length===0&&!s&&e.jsx(v,{title:"Ups, nothing here..."}),e.jsx("div",{className:"carousel w-full p-4 space-x-4 rounded-box",children:s?m:t})]})},_=()=>{const{movies:r,isLoading:a}=f(),{tvShows:l,isLoading:o}=j(),s=[{title:"Movies",source:r,isLoading:a,tvProgramType:"movie"},{title:"TV Shows",source:l,isLoading:o,tvProgramType:"tv-show"}],n=s.reduce((c,m)=>[...c,...m.source.map(t=>{var i;return{source:(i=t.images)==null?void 0:i.original,title:(t==null?void 0:t.title)||(t==null?void 0:t.name)}})].filter(t=>!!t.source&&!!t.title),[]);return e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsx(p,{imageSources:n,hasOverlay:!0}),e.jsxs("div",{className:"relative -top-16",children:[e.jsxs("h1",{className:"text-2xl text-left mb-5",children:["🍿 Top picks to watch",e.jsx("span",{className:"text-5xl text-pink-400",children:"."})]}),s.map(({title:c,source:m,isLoading:t,tvProgramType:i},d)=>e.jsx(w,{title:c,tvPrograms:m,isLoading:t,tvProgramType:i},`tv-program-rail_${d}`))]})]})};export{_ as default};
