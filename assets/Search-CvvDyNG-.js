import{r as m,j as e,u as j,L as w}from"./index-CBsx-jGf.js";import{T as S}from"./tvshow.api.services-DhTWx-Vj.js";import b from"./NotFound-DO9NVz5v.js";import{b as y,c as N}from"./useFetchTVShows-DnPZQHbj.js";import{a as _}from"./useSearchQueryParams-CD85dQKk.js";const L=n=>{const{onSearch:a,autoFocus:t=!1,isLoading:o=!1}=n,i=m.useRef(null),l=r=>{r.preventDefault();const c=new FormData(r.target).get("search_input");a(c),h()},h=()=>{var r;(r=i.current)==null||r.reset()};return e.jsx("div",{className:"card shrink-0 w-full shadow-2xl bg-neutral my-7 rounded",children:e.jsxs("form",{id:"search_form",name:"search_form","data-testid":"search_form",className:"card-body flex flex-row p-3",ref:i,onSubmit:l,children:[e.jsx("div",{className:"form-control flex-1",children:e.jsx("input",{id:"search_input",name:"search_input",type:"text",placeholder:"Search for a movie or tv show here...",className:"input input-bordered","data-testid":"search_input",autoFocus:t,disabled:o,autoComplete:"off",required:!0,"data-cy":"search_input"})}),e.jsx("div",{className:"form-control flex",children:e.jsxs("button",{id:"btn_search",name:"btn_search","data-testid":"btn_search",type:"submit",disabled:o,className:"btn btn-ghost","data-cy":"btn_search",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Search"]})})]})})},V=()=>{const n=j(),[a,t]=m.useState(""),{movies:o,isLoading:i}=y(a),{tvShows:l,isLoading:h}=N(a),{getQueryParamValues:r,setQueryParams:d}=_(),c=[...o.map(s=>({...s,tvProgramType:"movie"})),...l.map(s=>({...s,tvProgramType:"tv-show"}))],u=i||h,f={movie:"movies","tv-show":"tv-shows"},x=s=>{t(s),d("/search",{query:s})};return m.useEffect(()=>{const{query:s}=r(["query"]);s&&t(s)},[]),e.jsxs("div",{className:"flex flex-col w-full",children:[e.jsxs("h1",{className:"text-2xl text-left",children:["ðŸ”Ž What you are looking for?",e.jsx("span",{className:"text-5xl text-pink-400",children:"."})]}),e.jsx(L,{onSearch:x,isLoading:u,autoFocus:!0}),e.jsxs("h2",{className:"divider divider-start text-lg",children:["Search results for: ",e.jsx("span",{className:"text-white font-semibold",children:a||"-- Movie or TV Show --"})]}),e.jsxs("div",{className:"hero h-full flex flex-col mt-10",children:[u&&e.jsx(w,{}),c.length===0&&e.jsx(b,{title:"Please, try searching for something"}),e.jsx("div",{className:"grid md:grid-cols-5 gap-5 mb-10 sm:grid-cols-3 xs:grid-cols-2",children:c.map(({id:s,tvProgramType:p,...g},v)=>e.jsx(S,{info:g,onClick:()=>n.push(`/${f[p]}/${s}`)},`program_${v}`))})]})]})};export{V as default};
